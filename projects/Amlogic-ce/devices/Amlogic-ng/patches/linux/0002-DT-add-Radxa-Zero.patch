From c8576c7c85cb95f4003f96f371937b0337ac8a28 Mon Sep 17 00:00:00 2001
From: Portisch <hugo.portisch@yahoo.de>
Date: Thu, 8 Jul 2021 13:00:32 +0200
Subject: [PATCH 2/2] DT: add Radxa Zero

---
 arch/arm64/boot/dts/amlogic/Makefile          |  1 +
 .../dts/amlogic/g12a_s905y2_radxa_zero.dts    | 51 +++++++++++++++++++
 2 files changed, 52 insertions(+)
 create mode 100644 arch/arm64/boot/dts/amlogic/g12a_s905y2_radxa_zero.dts

diff --git a/arch/arm64/boot/dts/amlogic/Makefile b/arch/arm64/boot/dts/amlogic/Makefile
index 5ca7df5fc94d..8652403a13e9 100644
--- a/arch/arm64/boot/dts/amlogic/Makefile
+++ b/arch/arm64/boot/dts/amlogic/Makefile
@@ -8,6 +8,7 @@ dtb-$(CONFIG_ARM64) += g12a_s905x2_beelink_gt1_mini_2g.dtb
 dtb-$(CONFIG_ARM64) += g12a_s905x2_beelink_gt1_mini_4g.dtb
 dtb-$(CONFIG_ARM64) += g12a_s905y2_2g.dtb
 dtb-$(CONFIG_ARM64) += g12a_s905y2_4g.dtb
+dtb-$(CONFIG_ARM64) += g12a_s905y2_radxa_zero.dtb
 dtb-$(CONFIG_ARM64) += g12b_a311d_khadas_vim3.dtb
 dtb-$(CONFIG_ARM64) += g12b_s922x_beelink_gt_king.dtb
 dtb-$(CONFIG_ARM64) += g12b_s922x_beelink_gt_king_rev_a.dtb
diff --git a/arch/arm64/boot/dts/amlogic/g12a_s905y2_radxa_zero.dts b/arch/arm64/boot/dts/amlogic/g12a_s905y2_radxa_zero.dts
new file mode 100644
index 000000000000..23e59998046c
--- /dev/null
+++ b/arch/arm64/boot/dts/amlogic/g12a_s905y2_radxa_zero.dts
@@ -0,0 +1,51 @@
+#include "coreelec_g12a.dtsi"
+
+/{
+	model = "Radxa Zero";
+	coreelec-dt-id = "g12a_s905y2_radxa_zero";
+
+	/delete-node/ memory@00000000;
+
+	cvbsout {
+		status = "disabled";
+	};
+};
+
+&i2c0 {
+	status = "disabled";
+};
+
+&pinctrl_periphs {
+	/delete-node/ spdifout;
+	/delete-node/ spdifout_a_mute;
+};
+
+&pinctrl_aobus {
+	spdifout: spdifout {
+		mux {
+			groups = "spdif_out_ao";
+			function = "spdif_out_ao";
+		};
+	};
+
+	spdifout_a_mute: spdifout_a_mute {
+		mux {
+			groups = "GPIOAO_10";
+			function = "gpio_aobus";
+		};
+	};
+};
+
+&usb3_phy_v2 {
+	portnum = <0>;
+	gpio-vbus-power = "GPIOH_6";
+	gpios = <&gpio GPIOH_6 GPIO_ACTIVE_HIGH>;
+};
+
+&ethmac {
+	status = "disabled";
+};
+
+&amhdmitx {
+	dongle_mode = <0>;
+};
-- 
2.32.0

